## 프로세스 간 통신(IPC, Inter Process Communication)

### 가. IPC의 개념과 목적

1. 개념:

IPC(Inter Process Communication)는 운영체제 내에서 독립적으로 실행되는 여러 프로세스들이 서로 데이터를 교환하고 정보를 공유하며 상호 작용할 수 있도록 해주는 메커니즘을 의미합니다. 각각의 프로세스는 고유한 메모리 공간을 가지고 독립적으로 실행되기 때문에, 단순히 한 프로세스에서 다른 프로세스의 메모리 공간에 직접 접근하는 것은 불가능합니다. IPC는 이러한 독립적인 프로세스들이 마치 하나의 프로그램처럼 협력하여 복잡한 작업을 수행할 수 있도록 연결하는 다리 역할을 합니다.

2. 목적:

IPC의 주요 목적은 다음과 같습니다.

- **정보 교환(Information Exchange):** 한 프로세스에서 생성된 데이터를 다른 프로세스가 필요로 할 때, 이를 안전하고 효율적으로 전달하기 위함입니다. 예를 들어, 웹 서버 프로세스가 클라이언트 요청을 처리하기 위해 데이터베이스 프로세스에 쿼리를 전송하고 결과를 받는 경우입니다.
    
- **데이터 공유(Data Sharing):** 여러 프로세스가 동일한 데이터에 접근하여 공동 작업을 수행해야 할 때, 데이터를 효율적으로 공유하고 일관성을 유지하기 위함입니다. 이를 통해 중복 저장을 방지하고 자원 활용을 최적화할 수 있습니다.
    
- **작업 동기화(Synchronization):** 특정 작업이 여러 프로세스에 의해 순서대로 또는 동시에 처리되어야 할 때, 프로세스들의 실행 순서를 제어하고 특정 조건이 충족될 때까지 기다리게 하는 등 협력적인 작업을 가능하게 합니다.
    
- **모듈성 및 분산 처리**: 복잡한 시스템을 여러 개의 독립적인 프로세스로 분할하여 개발하고, 각 프로세스가 특정 기능을 담당하도록 함으로써 시스템의 모듈성을 높이고, 필요에 따라 분산 환경에서 실행될 수 있는 기반을 제공합니다. 이는 시스템의 유지보수 및 확장성을 향상시킵니다.
    

### 나. IPC 주요 기법 3가지

운영체제는 다양한 IPC 기법을 제공하며, 각 기법은 특징과 활용 분야가 다릅니다. 여기서는 대표적인 세 가지 기법을 설명합니다.

1. **파이프(Pipe)**
    
    - **개념:** 단방향 통신을 지원하는 가장 간단한 IPC 기법입니다. 하나의 파이프는 한 프로세스가 데이터를 쓰면 다른 프로세스가 읽는 방식으로 작동합니다. 즉, 데이터 흐름이 단방향으로 고정되어 있습니다. 주로 부모-자식 프로세스 간에 사용되지만, 이름 있는 파이프(Named Pipe, FIFO)를 사용하면 독립적인 프로세스 간에도 통신이 가능합니다.
        
    - **특징:**
        
        - **단방향 통신:** 한쪽 끝은 쓰기 전용, 다른 쪽 끝은 읽기 전용입니다. 양방향 통신이 필요하면 두 개의 파이프를 생성해야 합니다.
            
        - **스트림(Stream) 방식:** 바이트 스트림 형태로 데이터를 전송하며, 경계가 없습니다.
            
        - **익명 파이프(Anonymous Pipe):** 부모-자식 프로세스 간에만 사용 가능하며, 주로 `fork()` 시스템 호출을 통해 생성된 자식 프로세스가 부모의 파이프를 상속받아 사용합니다.
            
        - **이름 있는 파이프(Named Pipe / FIFO):** 파일 시스템에 이름을 가진 파일 형태로 존재하여, 서로 관련 없는 프로세스들도 이 이름을 통해 통신할 수 있습니다.
            
    - **장점:** 사용법이 간단합니다.
        
    - **단점:** 단방향이며, 통신 가능한 프로세스 수가 제한적입니다. 데이터 양이 많을 때는 비효율적일 수 있습니다.
        
2. **메시지 큐(Message Queue)**
    
    - **개념:** 커널이 제공하는 메시지 저장 공간으로, 프로세스들이 메시지를 넣어두거나 가져갈 수 있는 큐(Queue) 형태의 공간입니다. 메시지들은 고유한 타입(type)을 가질 수 있으며, 프로세스는 특정 타입의 메시지만 선택적으로 읽을 수 있습니다.
        
    - **특징:**
        
        - **비동기 통신:** 메시지를 보낸 프로세스는 즉시 다음 작업을 수행할 수 있으며, 메시지를 받는 프로세스는 메시지가 도착할 때까지 기다리거나 비동기적으로 처리할 수 있습니다.
            
        - **메시지 단위 통신:** 파이프와 달리 메시지 경계가 명확하게 구분됩니다.
            
        - **선택적 수신:** 메시지 타입에 따라 필요한 메시지만 선택하여 읽을 수 있습니다.
            
        - **독립적인 프로세스 통신:** 서로 관련 없는 프로세스 간에도 통신이 가능합니다.
            
    - **장점:** 비동기적이며 메시지 경계가 명확하고, 다양한 프로세스 간 통신에 적합합니다.
        
    - **단점:** 메시지 크기에 제한이 있을 수 있으며, 커널 공간에 데이터를 복사해야 하므로 오버헤드가 발생할 수 있습니다.
        
3. **공유 메모리(Shared Memory)**
    
    - **개념:** 여러 프로세스가 공통적으로 접근할 수 있는 메모리 영역을 운영체제로부터 할당받아 사용하는 기법입니다. 한 프로세스가 공유 메모리에 데이터를 쓰면, 다른 프로세스는 이 메모리 영역에 직접 접근하여 데이터를 읽을 수 있습니다.
        
    - **특징:**
        
        - **가장 빠른 IPC:** 커널을 통한 데이터 복사 과정 없이 프로세스들이 직접 메모리에 접근하므로 IPC 기법 중 가장 빠릅니다.
            
        - **직접 접근:** 각 프로세스의 가상 메모리 공간에 공유 메모리 영역을 매핑(Mapping)하여 직접 접근합니다.
            
        - **동기화 문제 발생 가능성:** 여러 프로세스가 동시에 공유 메모리에 접근하여 데이터를 변경할 경우 데이터 충돌이나 일관성 문제가 발생할 수 있으므로, 반드시 동기화 메커니즘이 필요합니다.
            
    - **장점:** 매우 빠른 속도로 대량의 데이터를 공유할 수 있습니다.
        
    - **단점:** 동기화 문제를 직접 해결해야 하는 복잡성이 있습니다.
        

### 다. 공유 자원의 충돌이나 일관성 문제를 해결하기 위한 동기화 기법

공유 자원(예: 공유 메모리)에 여러 프로세스가 동시에 접근하여 데이터를 읽거나 쓸 때, 잘못된 결과가 발생하거나 데이터의 일관성이 깨지는 **경쟁 조건(Race Condition)** 문제가 발생할 수 있습니다. 이를 해결하기 위해 동기화(Synchronization) 기법이 필요합니다.

1. **세마포어(Semaphore)**
    
    - **개념:** 여러 프로세스가 공유 자원에 대한 접근을 제어하고, 한정된 자원의 개수를 관리하는 데 사용되는 정수 변수입니다. 세마포어는 `P()` (또는 `wait()`, `down()`)와 `V()` (또는 `signal()`, `up()`) 두 가지 원자적인(Atomic) 연산을 통해서만 접근할 수 있습니다.
        
        - `P()`: 세마포어 값을 감소시키고, 값이 0보다 작아지면 해당 프로세스를 대기시킵니다. (자원 획득 시도)
            
        - `V()`: 세마포어 값을 증가시키고, 대기 중인 프로세스가 있다면 깨웁니다. (자원 반납)
            
    - **활용:**
        
        - **이진 세마포어(Binary Semaphore) / 뮤텍스(Mutex):** 값이 0 또는 1만 가지는 세마포어로, 한 번에 하나의 프로세스만 임계 영역(Critical Section)에 접근하도록 하여 상호 배제(Mutual Exclusion)를 구현합니다.
            
        - **카운팅 세마포어(Counting Semaphore):** 자원의 개수를 나타내는 초기 값을 가지며, 여러 개의 자원에 대한 접근을 제어할 때 사용됩니다.
            
    - **장점:** 상호 배제 및 자원 수 관리에 유연하게 사용될 수 있습니다.
        
    - **단점:** 잘못 사용 시 교착 상태(Deadlock)나 기아(Starvation) 상태가 발생할 수 있습니다.
        
2. **뮤텍스(Mutex)**
    
    - **개념:** 상호 배제(Mutual Exclusion)를 위한 가장 대표적인 동기화 기법입니다. 공유 자원에 대한 접근을 '잠그고(Lock)' '잠금 해제(Unlock)'하는 메커니즘을 제공하여, 한 번에 하나의 프로세스(또는 스레드)만이 임계 영역에 진입할 수 있도록 보장합니다. 뮤텍스는 '소유권' 개념이 있어 잠근 프로세스만이 잠금을 해제할 수 있습니다.
        
    - **활용:** 공유 데이터 구조나 변수에 접근하는 코드 블록(임계 영역)을 보호하여 경쟁 조건을 방지합니다.
        
    - **장점:** 구현이 비교적 간단하고, 상호 배제를 명확하게 보장합니다.
        
    - **단점:** 세마포어와 마찬가지로 교착 상태에 빠질 위험이 있으며, 섬세한 락 관리가 필요합니다.
        
3. **모니터(Monitor)**
    
    - **개념:** 상호 배제를 위한 고수준의 동기화 구조입니다. 모니터는 공유 데이터와 그 데이터를 조작하는 프로시저(함수)들을 하나의 캡슐화된 객체 안에 묶고, 이 프로시저들에 대한 동시 접근을 자동으로 제어합니다. 모니터 내의 프로시저는 한 번에 하나의 프로세스(스레드)만 실행할 수 있도록 보장됩니다. 조건 변수(Condition Variable)를 포함하여 프로세스 간 통신 및 동기화를 위한 `wait()`와 `signal()` 연산을 제공합니다.
        
    - **활용:** 복잡한 공유 자원 관리나 생산자-소비자 문제와 같이 조건에 따른 프로세스 동기화가 필요한 경우에 유용합니다.
        
    - **장점:** 개발자가 직접 락을 관리할 필요가 없어 세마포어보다 오용 가능성이 낮고, 교착 상태를 줄일 수 있습니다 (완전히 방지하는 것은 아님).
        
    - **단점:** 운영체제나 프로그래밍 언어에서 모니터를 직접 지원해야 합니다 (Java의 `synchronized` 키워드, Python의 `threading.Lock` 등은 모니터의 개념을 부분적으로 구현한 것입니다).
        

이러한 동기화 기법들은 공유 자원에 대한 안전한 접근을 보장하여 데이터의 일관성과 무결성을 유지하는 데 필수적입니다. PM은 IT 프로젝트에서 IPC 기법과 동기화 전략을 설계할 때 시스템의 요구사항, 성능, 복잡성 등을 종합적으로 고려해야 합니다.

**요약**: IPC는 독립적인 프로세스 간의 정보 교환, 데이터 공유, 작업 동기화를 위한 메커니즘입니다. 주요 기법으로는 단방향의 파이프, 비동기 메시지 기반의 메시지 큐, 그리고 가장 빠르지만 동기화가 필요한 공유 메모리가 있습니다. 공유 자원 충돌 문제 해결을 위한 동기화 기법으로는 상호 배제를 위한 뮤텍스, 자원 관리를 위한 세마포어, 그리고 고수준의 캡슐화된 동기화 구조인 모니터가 있습니다.