제4정규형(Fourth Normal Form, 4NF)은 데이터베이스 정규화 과정에서 BCNF(보이스-코드 정규형)보다 한 단계 더 나아가 다치 종속(Multi-valued Dependency, MVD)을 제거하여 데이터 중복을 최소화하고 데이터 무결성을 강화하는 정규형입니다. 제4정규형은 특히 릴레이션 내에 독립적인 다치 종속이 존재할 때 적용됩니다.

**1. 제4정규형의 정의 및 필요성**

제4정규형은 릴레이션 R에서 모든 비자명(Non-trivial) 다치 종속 X→→Y가 존재할 때, X가 릴레이션 R의 슈퍼키(Superkey)여야 한다는 조건을 만족해야 합니다. 여기서 "비자명"이란 Y가 X의 부분집합이 아니거나 X∪Y가 R의 모든 속성을 포함하지 않는 경우를 의미합니다.

제4정규형의 필요성은 다음과 같습니다:

- **다치 종속으로 인한 이상 현상 제거**: 다치 종속이 존재하는 릴레이션에서는 삽입, 삭제, 갱신 이상(Anomaly)이 발생할 수 있습니다. 예를 들어, 특정 학생이 수강하는 과목이 여러 개이고, 동시에 해당 학생이 속한 동아리도 여러 개일 때, 이 두 정보가 하나의 테이블에 함께 저장되면 중복이 발생하고 데이터 조작 시 문제가 생길 수 있습니다.
    
- **데이터 중복 최소화**: 불필요한 데이터 중복을 제거하여 저장 공간을 효율적으로 사용하고 일관성을 유지합니다.
    
- **데이터 무결성 강화**: 다치 종속으로 인해 발생할 수 있는 데이터 불일치를 방지하여 데이터의 정확성과 신뢰성을 높입니다.
    

**2. 다치 종속(Multi-valued Dependency, MVD)의 개념**

다치 종속 X→→Y는 어떤 릴레이션 R에서 속성 집합 X의 각 값에 대해 속성 집합 Y의 값들이 여러 개 대응되며, 이 Y값들이 X와 독립적으로 존재함을 의미합니다. 즉, X의 특정 값에 대해 Y의 값 집합이 존재하고, 이 Y의 값 집합은 다른 속성들과는 무관하게 X에 의해서만 결정됩니다.

예를 들어, '학생(Student)', '과목(Course)', '취미(Hobby)' 속성을 가진 릴레이션 R이 있다고 가정해 봅시다. 한 학생은 여러 과목을 수강할 수 있고, 여러 취미를 가질 수 있습니다. 이때 '학생' 속성이 '과목'과 '취미'를 다치 종속적으로 결정한다고 볼 수 있습니다. 즉, '학생 →→ 과목' 이고 '학생 →→ 취미' 입니다. 여기서 '과목'과 '취미'는 서로 독립적입니다.

**3. 제4정규형의 정규화 과정**

제4정규형으로 정규화하는 과정은 다치 종속을 분리하는 방식으로 이루어집니다.

1. **다치 종속 식별**: 릴레이션 R에서 비자명 다치 종속 X→→Y를 식별합니다.
    
2. **분해**: 릴레이션 R을 두 개 이상의 릴레이션으로 분해합니다.
    
    - R1​=(X∪Y)
        
    - R2​=(X∪(R−X−Y))
        
        이때 X는 두 새로운 릴레이션의 공통 속성(조인 속성)이 됩니다.
        

**예시:**

'학생_과목_취미(Student, Course, Hobby)' 릴레이션에서 다치 종속 'Student →→ Course' 및 'Student →→Hobby'가 존재한다고 가정합니다. 'Course'와 'Hobby'는 서로 독립적입니다.

|Student|Course|Hobby|
|---|---|---|
|김철수|데이터베이스|독서|
|김철수|데이터베이스|영화감상|
|김철수|운영체제|독서|
|김철수|운영체제|영화감상|

이 릴레이션은 4NF를 만족하지 않습니다. '김철수'가 '데이터베이스'와 '운영체제'를 수강하고, '독서'와 '영화감상' 취미를 가질 때, 이 정보들이 모두 중복되어 저장됩니다.

제4정규형으로 정규화하면 다음과 같이 분해할 수 있습니다.

**릴레이션 1: 학생_과목(Student, Course)**

|Student|Course|
|---|---|
|김철수|데이터베이스|
|김철수|운영체제|

**릴레이션 2: 학생_취미(Student, Hobby)**

|Student|Hobby|
|---|---|
|김철수|독서|
|김철수|영화감상|

이렇게 릴레이션을 분해함으로써 데이터 중복이 제거되고, 각 릴레이션은 4NF를 만족하게 됩니다.

**4. 제4정규형의 중요성 및 한계**

제4정규형은 데이터베이스 설계 시 데이터 일관성과 무결성을 극대화하는 데 중요한 역할을 합니다. 특히 다치 종속이 발생하는 복잡한 데이터 모델에서 유용합니다.

하지만 모든 릴레이션을 4NF까지 정규화하는 것이 항상 최적의 선택은 아닙니다. 릴레이션 분해가 너무 많아지면 조인(Join) 연산이 빈번해져 쿼리 성능이 저하될 수 있습니다. 따라서 실제 데이터베이스 설계에서는 성능과 정규화 수준 사이의 균형을 고려하여 적절한 정규화 단계를 선택하는 것이 중요합니다. 대부분의 상업용 데이터베이스 시스템에서는 BCNF나 3NF까지만 정규화하는 경우가 많으며, 4NF는 특정 도메인에서 다치 종속의 문제가 심각할 때 고려됩니다.

**요약**: 제4정규형은 릴레이션 내의 모든 비자명 다치 종속을 제거하여 데이터 중복을 줄이고 무결성을 강화하는 정규형입니다. 이는 다치 종속으로 인한 삽입/삭제/갱신 이상 현상을 방지하며, 릴레이션을 분해하여 중복을 최소화합니다.